{"version":3,"sources":["webpack:///webpack/bootstrap ec9bf81d5e274ad99aa9","webpack:///external \"THREE\"","webpack:///./src/thirdpersoncontroller.ts","webpack:///./src/content/character/character.toml","webpack:///./src/index.ts","webpack:///./src/lib/input.ts","webpack:///./~/path-browserify/index.js","webpack:///./~/process/browser.js","webpack:///./src/content/character-controller.toml","webpack:///./src/content/weapons/bolter.toml","webpack:///./src/o3d/vox.ts","webpack:///./src/content/testlevel.toml","webpack:///./src/o3d/weapon.ts"],"names":[],"mappings":"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AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,oBAAoB;AAC9B;AACA;;AAEA;AACA,UAAU,UAAU;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;;AC/NA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;ACnLtC;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpFA,kCAA6B;AAC7B,mCAA+B;AAI/B,IAAM,MAAM,GAAG,IAAI,GAAG,CAAC,MAAM,EAAE,CAAC;AAehC;IAAsC,4BAAc;IAQhD,kBAAY,OAAiB;Q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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ec9bf81d5e274ad99aa9","module.exports = THREE;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 0\n// module chunks = 0","import * as THREE from 'three';\r\nimport {JoshuaTree} from './lib/joshuatree';\r\nimport {keys, mouse} from './lib/input';\r\nimport Vox from './o3d/vox';\r\nimport Weapon from './o3d/weapon';\r\n\r\nconst data: IControllerData = require('./content/character-controller.toml');\r\nconst weapon = require('./content/weapons/bolter.toml');\r\n\r\ninterface IControllerData {\r\n    movement: {\r\n        speed: number;\r\n        turn: number;\r\n    };\r\n\r\n    camera: {\r\n        lerp: number;\r\n\r\n        distance: {\r\n            x: number;\r\n            y: number;\r\n            z: number;\r\n        };\r\n\r\n        offset: {\r\n            x: number;\r\n            y: number;\r\n            z: number;\r\n        };\r\n    };\r\n\r\n\r\n}\r\n\r\nexport default class ThirdPersonController {\r\n    cam: THREE.Camera;\r\n    character: Vox;\r\n    targeter: THREE.Vector3;\r\n    distance: THREE.Vector3;\r\n    targetOffset: THREE.Vector3;\r\n    weapon: Weapon;\r\n\r\n    constructor(cam: THREE.Camera, character: Vox) {\r\n        this.distance = new THREE.Vector3(data.camera.distance.x, data.camera.distance.y, data.camera.distance.z);\r\n        this.targetOffset = new THREE.Vector3(data.camera.offset.x, data.camera.offset.y, data.camera.offset.z);\r\n        this.cam = cam;\r\n        this.targeter = new THREE.Vector3();\r\n        this.character = character;\r\n        this.weapon = new Weapon(weapon);\r\n        this.character.add(this.weapon);\r\n    }\r\n\r\n    tick(delta: number) {\r\n        const moveDelta = new THREE.Vector3(0, 0, 0);\r\n\r\n        const faceTo = new THREE.Vector3(\r\n            this.character.position.x + -2 * mouse.xp,\r\n            this.character.position.y,\r\n            this.character.position.z + -2 * mouse.yp,\r\n        );\r\n\r\n        this.targeter.lerp(faceTo, data.movement.turn);\r\n        this.character.lookAt(this.targeter);\r\n\r\n        if(mouse.left) {\r\n            this.weapon.fire();\r\n        }\r\n        /*\r\n        let yRot = 0;\r\n\r\n        if(Math.abs(mouse.xp) > data.mouse.radius) {\r\n           yRot = mouse.xp * data.mouse.turnSpeed * delta;\r\n        }\r\n          this.character.rotateY(yRot);\r\n        */\r\n\r\n        if(keys.w) moveDelta.setZ(1);\r\n        if(keys.s) moveDelta.setZ(-1);\r\n        if(keys.d) moveDelta.setX(-1);\r\n        if(keys.a) moveDelta.setX(1);\r\n\r\n        const moved = moveDelta.x || moveDelta.z || moveDelta.y;\r\n        if(moved && this.character.current === 'idle') {\r\n            this.character.play('walk');\r\n        }\r\n\r\n        if(!moved && this.character.current === 'walk') {\r\n            this.character.play('idle');\r\n        }\r\n\r\n        this.character.position.add(moveDelta.multiplyScalar(data.movement.speed * delta));\r\n        this.cam.position.lerp(this.character.position.clone().add(this.distance), data.camera.lerp);\r\n        this.cam.lookAt(this.character.position.clone().add(this.targetOffset));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/thirdpersoncontroller.ts","module.exports    = {\n\t\"default\": \"idle\",\n\t\"size\": 0.02,\n\t\"animation\": {\n\t\t\"idle\": {\n\t\t\t\"speed\": 1000,\n\t\t\t\"vox\": [\n\t\t\t\t\"characters/player/chr_idle.vox\"\n\t\t\t]\n\t\t},\n\t\t\"walk\": {\n\t\t\t\"speed\": 100,\n\t\t\t\"vox\": [\n\t\t\t\t\"characters/player/chr_walkcycle-00.vox\",\n\t\t\t\t\"characters/player/chr_walkcycle-01.vox\",\n\t\t\t\t\"characters/player/chr_walkcycle-02.vox\",\n\t\t\t\t\"characters/player/chr_walkcycle-03.vox\",\n\t\t\t\t\"characters/player/chr_walkcycle-04.vox\",\n\t\t\t\t\"characters/player/chr_walkcycle-05.vox\"\n\t\t\t]\n\t\t}\n\t}\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/character/character.toml\n// module id = 4\n// module chunks = 0","import JTreeEntity from './JTreeEntity';\r\nimport ThirdPersonController from './thirdpersoncontroller';\r\nimport * as THREE from 'three';\r\nimport Vox from './o3d/vox';\r\n\r\nconst charData = require('./content/character/character.toml');\r\nconst testLevel = require('./content/testlevel.toml');\r\n\r\nconst character = new Vox(charData);\r\nconst scene = new THREE.Scene();\r\nconst camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );\r\n\r\nconst renderer = new THREE.WebGLRenderer({ antialias: true });\r\nrenderer.setSize( window.innerWidth, window.innerHeight );\r\ndocument.body.appendChild( renderer.domElement );\r\n\r\nconst controls = new ThirdPersonController(camera, character);\r\nconst clock = new THREE.Clock();\r\n\r\ncamera.position.z = 5;\r\nconst geometry = new THREE.BoxBufferGeometry( 1, 1, 1 );\r\nconst uniforms = {\r\n    color: {value: new THREE.Vector4(0, 1, 0, 1)},\r\n};\r\n\r\nconst material = new THREE.MeshPhongMaterial( {color: 0x00ff00} );\r\n\r\nscene.add(new Vox(testLevel));\r\nscene.add(character);\r\nscene.add(new THREE.DirectionalLight());\r\nscene.add(new THREE.AmbientLight());\r\n\r\nconst direction = 1;\r\n\r\nconst render = () => {\r\n    const delta = clock.getDelta();\r\n\r\n    requestAnimationFrame(render);\r\n    controls.tick(delta);\r\n\r\n    renderer.render(scene, camera);\r\n};\r\n\r\nrender();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","document.addEventListener('keyup', (e) => {\r\n    keys[e.keyCode] = false;\r\n    keys[e.key] = false;\r\n});\r\n\r\ndocument.addEventListener('keydown', (e) => {\r\n    keys[e.keyCode] = true;\r\n    keys[e.key] = true;\r\n});\r\n\r\ndocument.addEventListener('mousemove', e => {\r\n    mouse.x = e.clientX;\r\n    mouse.y = e.clientY;\r\n\r\n    const w = window.innerWidth;\r\n    const h = window.innerHeight;\r\n\r\n    mouse.xp = mouse.x / w - .5;\r\n    mouse.yp = mouse.y / h - .5;\r\n});\r\n\r\ndocument.addEventListener('mousedown', e => {\r\n    mouse.left = true;\r\n});\r\n\r\ndocument.addEventListener('mouseup', e => {\r\n    mouse.left = false;\r\n});\r\n\r\nexport const keys: {[key: string]: boolean} = {};\r\nexport const mouse = {\r\n    x: 0,\r\n    y: 0,\r\n    xp: 0,\r\n    yp: 0,\r\n    left: false,\r\n    right: false,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/input.ts","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/path-browserify/index.js\n// module id = 8\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 9\n// module chunks = 0","module.exports    = {\n\t\"movement\": {\n\t\t\"speed\": 2,\n\t\t\"turn\": 0.2\n\t},\n\t\"camera\": {\n\t\t\"lerp\": 0.5,\n\t\t\"distance\": {\n\t\t\t\"x\": 0,\n\t\t\t\"y\": 2,\n\t\t\t\"z\": -0.7\n\t\t},\n\t\t\"offset\": {\n\t\t\t\"x\": 0,\n\t\t\t\"y\": 0,\n\t\t\t\"z\": 0.5\n\t\t}\n\t}\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/character-controller.toml\n// module id = 10\n// module chunks = 0","module.exports    = {\n\t\"type\": \"Ranged\",\n\t\"default\": \"idle\",\n\t\"size\": 0.01,\n\t\"rotation\": [\n\t\t0,\n\t\t-90,\n\t\t0\n\t],\n\t\"position\": [\n\t\t-0.08,\n\t\t0.1,\n\t\t0.1\n\t],\n\t\"animation\": {\n\t\t\"idle\": {\n\t\t\t\"time\": 100000,\n\t\t\t\"vox\": [\n\t\t\t\t\"weapons/bolter.vox\"\n\t\t\t]\n\t\t}\n\t},\n\t\"ammo\": {\n\t\t\"default\": \"idle\",\n\t\t\"size\": 0.01,\n\t\t\"speed\": 5,\n\t\t\"spread\": 1,\n\t\t\"ttl\": 1000,\n\t\t\"rate\": 100,\n\t\t\"rotation\": [\n\t\t\t0,\n\t\t\t-90,\n\t\t\t0\n\t\t],\n\t\t\"position\": [\n\t\t\t-0.08,\n\t\t\t0.1,\n\t\t\t0.25\n\t\t],\n\t\t\"animation\": {\n\t\t\t\"idle\": {\n\t\t\t\t\"speed\": 1000,\n\t\t\t\t\"vox\": [\n\t\t\t\t\t\"ammo/charged_shell.vox\"\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t},\n\t\"weapon\": {\n\t\t\"name\": \"Hulking Blaster\",\n\t\t\"flavor_text\": \"...and they shall know no fear.\"\n\t},\n\t\"attack_info\": {\n\t\t\"attach_point\": \"right hand\",\n\t\t\"ammo\": 40,\n\t\t\"attack_template\": \"square\",\n\t\t\"projectile_spawn_location\": 0,\n\t\t\"bullet_size\": [\n\t\t\t0.5,\n\t\t\t0.5,\n\t\t\t0.5\n\t\t],\n\t\t\"attack_radius\": [\n\t\t\t1,\n\t\t\t1,\n\t\t\t1\n\t\t],\n\t\t\"can_move\": true,\n\t\t\"can_charge\": true,\n\t\t\"invulnerable_during\": false,\n\t\t\"terrain_destructor\": true,\n\t\t\"projectile_dmg\": 17.5,\n\t\t\"collision_dmg\": 0,\n\t\t\"velocity\": 60\n\t},\n\t\"effects\": {\n\t\t\"particle_effect\": \"laser\",\n\t\t\"sfx_on_use\": true,\n\t\t\"sfx\": \"Poww\"\n\t},\n\t\"timing\": {\n\t\t\"telegraph_time\": 0,\n\t\t\"attack_duration\": 0.8\n\t}\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/weapons/bolter.toml\n// module id = 11\n// module chunks = 0","import * as path from 'path';\r\nimport * as THREE from 'three';\r\n\r\ndeclare const vox: any;\r\n\r\nconst parser = new vox.Parser();\r\n\r\nexport interface IAnimation {\r\n    speed: number;\r\n    vox: string[];\r\n}\r\n\r\nexport interface IVoxData {\r\n    animation: {[key: string]: IAnimation};\r\n    size?: number;\r\n    rotation?: number[];\r\n    position?: number[];\r\n    default: string;\r\n}\r\n\r\nexport default class VoxModel extends THREE.Object3D {\r\n    data: IVoxData;\r\n    animations: any;\r\n    current: string;\r\n    frame: number;\r\n    timeout: number;\r\n    voxHolder: THREE.Object3D;\r\n\r\n    constructor(voxData: IVoxData) {\r\n        super();\r\n        this.data = voxData;\r\n        const dir = './vox';\r\n        this.animations = {};\r\n\r\n        Object.keys(this.data.animation).forEach(key => {\r\n            const anim: IAnimation = this.data.animation[key];\r\n\r\n            this.animations[key] = {\r\n                ...anim,\r\n                vox: anim.vox.map(file => parser.parse(path.join(dir, file)).then(voxelBin => {\r\n                    const builder = new vox.MeshBuilder(voxelBin, { voxelSize: voxData.size });\r\n                    return builder.createMesh();\r\n                })),\r\n            };\r\n        });\r\n        this.voxHolder = new THREE.Object3D();\r\n        if(voxData.position)\r\n            this.voxHolder.position.fromArray(voxData.position);\r\n\r\n        if(voxData.rotation)\r\n            this.voxHolder.rotation.fromArray(voxData.rotation.map(x => x * Math.PI/180));\r\n\r\n        this.add(this.voxHolder);\r\n        this.play(this.data.default);\r\n    }\r\n\r\n    play(animation: string) {\r\n        if(this.timeout) clearInterval(this.timeout);\r\n\r\n        this.current = animation;\r\n        this.frame = 0;\r\n\r\n        this.timeout = setInterval(this.step.bind(this), this.animations[animation].speed);\r\n    }\r\n\r\n    stop() {\r\n        clearTimeout(this.timeout);\r\n    }\r\n\r\n    async step() {\r\n        if(this.voxHolder.children[0])\r\n            this.voxHolder.remove(this.voxHolder.children[0]);\r\n\r\n        const voxList = this.animations[this.current].vox;\r\n        const mesh = await voxList[this.frame];\r\n        this.voxHolder.add(mesh);\r\n\r\n        this.frame = this.frame + 1 === voxList.length ? this.frame = 0 : this.frame + 1;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/o3d/vox.ts","module.exports    = {\n\t\"type\": \"Ranged\",\n\t\"default\": \"idle\",\n\t\"size\": 1,\n\t\"position\": [\n\t\t0,\n\t\t-20,\n\t\t0\n\t],\n\t\"animation\": {\n\t\t\"idle\": {\n\t\t\t\"time\": 100000,\n\t\t\t\"vox\": [\n\t\t\t\t\"testlevel.vox\"\n\t\t\t]\n\t\t}\n\t}\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/content/testlevel.toml\n// module id = 13\n// module chunks = 0","import Vox, {IAnimation, IVoxData} from './vox';\r\nimport * as THREE from 'three';\r\n\r\ninterface IAmmoData extends IVoxData {\r\n    speed: number;\r\n    ttl: number;\r\n    rate: number;\r\n    spread: number;\r\n}\r\n\r\ninterface IWeaponData extends IVoxData {\r\n    ammo: IAmmoData;\r\n}\r\n\r\n\r\n\r\nexport default class Weapon extends Vox {\r\n    data: IWeaponData;\r\n    ammo: Vox;\r\n    spawned: THREE.Object3D[];\r\n    count: number;\r\n    clock: THREE.Clock;\r\n\r\n    constructor(data: IWeaponData) {\r\n        super(data);\r\n        this.ammo = new Vox(this.data.ammo);\r\n        this.spawned = [];\r\n        this.clock = new THREE.Clock();\r\n\r\n        this.tick();\r\n    }\r\n\r\n    fire() {\r\n        const shell = new THREE.Object3D();\r\n        shell.copy(this.ammo);\r\n        shell.position.copy(this.position);\r\n        shell.rotation.copy(this.rotation);\r\n        shell.rotation.y += (Math.random() - 0.5) * this.data.ammo.spread;\r\n        this.spawned.push(shell);\r\n        this.parent.add(shell);\r\n    }\r\n\r\n    tick() {\r\n        const delta = this.clock.getDelta();\r\n        this.spawned.forEach(shell => {\r\n            shell.translateZ(this.data.ammo.speed * delta);\r\n        });\r\n\r\n        requestAnimationFrame(this.tick.bind(this));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/o3d/weapon.ts"],"sourceRoot":""}